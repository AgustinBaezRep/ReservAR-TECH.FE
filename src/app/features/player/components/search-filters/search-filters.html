<form [formGroup]="searchForm" (ngSubmit)="onSearch()" class="search-container">
    <!-- City -->
    <div class="filter-item city">
        <mat-icon>location_on</mat-icon>
        <mat-select #citySelect formControlName="city" placeholder="¿Dónde?" panelClass="above-panel">
            <mat-select-trigger>
                {{ searchForm.get('city')?.value || '¿Dónde?' }}
            </mat-select-trigger>
            @for (city of cities; track city) {
            <mat-option [value]="city">{{ city }}</mat-option>
            }
        </mat-select>
    </div>

    <div class="divider"></div>

    <!-- Sport -->
    <div class="filter-item sport">
        <mat-icon>{{ getSportIcon() }}</mat-icon>
        <mat-select #sportSelect formControlName="sport" placeholder="Elige deporte" panelClass="above-panel">
            <mat-select-trigger>
                {{ searchForm.get('sport')?.value || 'Elige deporte' }}
            </mat-select-trigger>
            @for (sport of sports; track sport.name) {
            <mat-option [value]="sport.name">
                <div class="sport-option">
                    @if (sport.icon === 'futbol') {
                    <mat-icon class="sport-icon">sports_soccer</mat-icon>
                    } @else {
                    <mat-icon class="sport-icon">sports_tennis</mat-icon>
                    }
                    <span>{{ sport.name }}</span>
                </div>
            </mat-option>
            }
        </mat-select>
    </div>

    <div class="divider"></div>

    <!-- Date -->
    <div class="filter-item date clickable" (click)="picker.open()">
        <mat-icon>calendar_today</mat-icon>
        <span class="value">{{ getFormattedDate() || 'Fecha' }}</span>
        <mat-form-field class="date-form-field">
            <input matInput [matDatepicker]="picker" [min]="today" formControlName="date">
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <mat-icon class="dropdown-arrow">arrow_drop_down</mat-icon>
    </div>

    <div class="divider"></div>

    <!-- Time -->
    <div class="filter-item time">
        <mat-icon>schedule</mat-icon>
        <mat-select #timeSelect formControlName="time" placeholder="Hora" panelClass="above-panel">
            @for (slot of timeSlots; track slot) {
            <mat-option [value]="slot">{{ slot }}</mat-option>
            }
        </mat-select>
    </div>

    <button mat-flat-button color="primary" type="submit" class="search-button">
        Buscar canchas
    </button>
</form>