<h2 mat-dialog-title>Editar Reserva</h2>
<mat-dialog-content>
  <form [formGroup]="form" class="edit-form compact-form">
    <div class="form-row">
      <!-- Selector de Fecha -->
      <mat-form-field appearance="outline" subscriptSizing="dynamic">
        <mat-label>Fecha</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="date" [min]="minDate" [max]="maxDate" />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <!-- Selector de Horario -->
      <mat-form-field appearance="outline" subscriptSizing="dynamic">
        <mat-label>Horario</mat-label>
        <mat-select formControlName="startTime">
          <mat-option *ngFor="let slot of availableTimeSlots" [value]="slot.label" [disabled]="!slot.available">
            {{ slot.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Selector de Cancha -->
    <mat-form-field appearance="outline" subscriptSizing="dynamic">
      <mat-label>Cancha</mat-label>
      <mat-select formControlName="courtId">
        <mat-option *ngFor="let court of availableCourts" [value]="court.id">
          {{ court.name }} ({{ getCourtPrice(court, form.get('startTime')?.value) |
          currency:'ARS':'symbol-narrow':'1.0-0' }})
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Precio (Solo lectura, más compacto) -->
    <div class="price-badge">
      Precio: {{ selectedCourtPrice | currency:'ARS':'symbol-narrow':'1.0-0' }}
    </div>

    <!-- Nombre del Usuario (Full Width) -->
    <mat-form-field appearance="outline" subscriptSizing="dynamic">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="userName" placeholder="Nombre" />
    </mat-form-field>

    <!-- Teléfono (Full Width, Mandatory) -->
    <mat-form-field appearance="outline" subscriptSizing="dynamic">
      <mat-label>Teléfono</mat-label>
      <input matInput formControlName="userContact" placeholder="11 1234 5678" />
      <mat-error *ngIf="form.get('userContact')?.hasError('required')">Requerido</mat-error>
    </mat-form-field>

    <!-- Email (Full Width, Optional) -->
    <mat-form-field appearance="outline" subscriptSizing="dynamic">
      <mat-label>Email (Opcional)</mat-label>
      <input matInput formControlName="userEmail" placeholder="juan@email.com" />
      <mat-error *ngIf="form.get('userEmail')?.hasError('email')">Email inválido</mat-error>
    </mat-form-field>
  </form>
</mat-dialog-content>

<mat-dialog-actions>
  <button mat-flat-button color="warn" (click)="onDelete()">Eliminar</button>
  <span class="spacer"></span>
  <button mat-button (click)="onCancel()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="onSave()" [disabled]="form.invalid">
    Guardar
  </button>
</mat-dialog-actions>