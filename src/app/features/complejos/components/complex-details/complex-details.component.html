<div class="details-container">
  <!-- General Information -->
  <mat-card>
    <mat-card-header>
      <mat-card-title>Información del Complejo</mat-card-title>
    </mat-card-header>
    <mat-card-content class="card-content">
      <form [formGroup]="generalInfoForm" class="details-form">
        <div class="form-row two-col">
          <mat-form-field appearance="outline">
            <mat-label>Nombre del Complejo</mat-label>
            <input matInput formControlName="name" placeholder="Ingrese el nombre del complejo">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="address" placeholder="Ingrese la dirección">
          </mat-form-field>
        </div>

        <div class="form-row two-col">
          <mat-form-field appearance="outline">
            <mat-label>Latitud</mat-label>
            <input matInput formControlName="latitude" placeholder="Ingrese la latitud">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Longitud</mat-label>
            <input matInput formControlName="longitude" placeholder="Ingrese la longitud">
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline">
          <mat-label>Teléfono del Administrador</mat-label>
          <input matInput formControlName="adminPhone" placeholder="Ingrese el número de teléfono">
        </mat-form-field>

        <mat-checkbox formControlName="isOnline">Complejo en línea</mat-checkbox>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Operating Hours -->
  <mat-card>
    <mat-card-header>
      <mat-card-title>Horarios de Operación</mat-card-title>
    </mat-card-header>
    <mat-card-content class="card-content">
      <form [formGroup]="operatingHoursForm">
        <div class="hours-header">
          <div class="col-day">Día</div>
          <div class="col-open">Abierto</div>
          <div class="col-time">Hora de Apertura</div>
          <div class="col-time">Hora de Cierre</div>
        </div>

        <div formArrayName="days" class="hours-list">
          <div *ngFor="let day of days.controls; let i = index" [formGroupName]="i" class="day-row">
            <div class="col-day capitalize">{{ getDayName(i) }}</div>
            <div class="col-open">
              <mat-checkbox formControlName="isOpen"></mat-checkbox>
            </div>
            <div class="col-time">
              <mat-form-field appearance="outline" class="time-input">
                <input matInput type="time" formControlName="openTime">
              </mat-form-field>
            </div>
            <div class="col-time">
              <mat-form-field appearance="outline" class="time-input">
                <input matInput type="time" formControlName="closeTime">
              </mat-form-field>
            </div>
            <div class="col-action">
              <button *ngIf="i === 0" mat-raised-button color="primary" (click)="replicateToAllDays()" type="button">
                <mat-icon>content_copy</mat-icon>
                Replicar al resto
              </button>
            </div>
          </div>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Available Services -->
  <mat-card>
    <mat-card-header>
      <mat-card-title>Servicios Disponibles</mat-card-title>
    </mat-card-header>
    <mat-card-content class="card-content">
      <form [formGroup]="servicesForm">
        <div class="services-grid">
          <mat-checkbox formControlName="wifi">WiFi</mat-checkbox>
          <mat-checkbox formControlName="parking">Estacionamiento</mat-checkbox>
          <mat-checkbox formControlName="buffet">Buffet</mat-checkbox>
          <mat-checkbox formControlName="showers">Duchas</mat-checkbox>
          <mat-checkbox formControlName="lighting">Iluminación</mat-checkbox>
          <mat-checkbox formControlName="roofing">Techado</mat-checkbox>
          <mat-checkbox formControlName="lockers">Lockers</mat-checkbox>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Mercado Pago -->
  <mat-card>
    <mat-card-header>
      <mat-card-title>Link Mercado Pago</mat-card-title>
    </mat-card-header>
    <mat-card-content class="card-content">
      <form [formGroup]="mercadoPagoForm" class="details-form">
        <mat-form-field appearance="outline">
          <mat-label>Client ID de Mercado Pago</mat-label>
          <input matInput formControlName="clientId" placeholder="Ingrese el Client ID de Mercado Pago">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Client Secret de Mercado Pago</mat-label>
          <input matInput formControlName="clientSecret" type="password"
            placeholder="Ingrese el Client Secret de Mercado Pago">
        </mat-form-field>
      </form>
    </mat-card-content>
  </mat-card>
</div>

<!-- Floating Save Button -->
<div class="floating-save-container" *ngIf="hasUnsavedChanges">
  <button class="floating-save-button" (click)="saveAllChanges()">
    <mat-icon>save</mat-icon>
    Guardar
  </button>
</div>